{
  "info": {
    "_postman_id": "payment-echo-system-v1",
    "name": "Payment Echo System API v1",
    "description": "Complete API collection for Payment Echo System with filtering, pagination, and i18n support. All requests include test scripts and auto-extract IDs.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "payment-echo-system"
  },
  "item": [
    {
      "name": "Health & Info",
      "item": [
        {
          "name": "Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has status field\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('status');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/actuator/health",
              "host": ["{{baseUrl}}"],
              "path": ["actuator", "health"]
            }
          }
        },
        {
          "name": "Application Info",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/actuator/info",
              "host": ["{{baseUrl}}"],
              "path": ["actuator", "info"]
            }
          }
        },
        {
          "name": "Metrics",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/actuator/metrics",
              "host": ["{{baseUrl}}"],
              "path": ["actuator", "metrics"]
            }
          }
        }
      ]
    },
    {
      "name": "Payments",
      "item": [
        {
          "name": "Get All Payments",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has payments array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('payments');",
                  "    pm.expect(jsonData.payments).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Response has total count\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('total');",
                  "});",
                  "",
                  "// Auto-extract first payment ID if available",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.payments && jsonData.payments.length > 0) {",
                  "        pm.collectionVariables.set('paymentId', jsonData.payments[0].id);",
                  "        console.log('Set paymentId variable:', jsonData.payments[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/payments?page=0&size=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "payments"],
              "query": [
                {
                  "key": "page",
                  "value": "0",
                  "description": "Page number (0-indexed)"
                },
                {
                  "key": "size",
                  "value": "20",
                  "description": "Page size"
                }
              ]
            },
            "description": "Get all payments with pagination. Auto-extracts first payment ID to {{paymentId}} variable."
          }
        },
        {
          "name": "Get Payments with Filters (Sample: USD RECEIVED)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"All payments have RECEIVED status\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.payments && jsonData.payments.length > 0) {",
                  "        jsonData.payments.forEach(function(payment) {",
                  "            pm.expect(payment.status).to.eql('RECEIVED');",
                  "        });",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"All payments have USD currency\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.payments && jsonData.payments.length > 0) {",
                  "        jsonData.payments.forEach(function(payment) {",
                  "            pm.expect(payment.currency).to.eql('USD');",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/payments?status=RECEIVED&currency=USD&minAmount=100&maxAmount=2000&page=0&size=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "payments"],
              "query": [
                {
                  "key": "status",
                  "value": "RECEIVED",
                  "description": "Filter by status. Sample data includes: RECEIVED, PROCESSING, COMPLETED, FAILED"
                },
                {
                  "key": "currency",
                  "value": "USD",
                  "description": "Filter by currency. Sample data includes: USD, EUR, GBP"
                },
                {
                  "key": "minAmount",
                  "value": "100",
                  "description": "Minimum amount filter"
                },
                {
                  "key": "maxAmount",
                  "value": "2000",
                  "description": "Maximum amount filter"
                },
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            },
            "description": "Filter payments by status and currency. Sample data includes payments with amounts: 1500.00 USD, 500.00 USD, 1000.00 USD (RECEIVED)"
          }
        },
        {
          "name": "Get Payments Filtered by Currency (EUR)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"All payments have EUR currency\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.payments && jsonData.payments.length > 0) {",
                  "        jsonData.payments.forEach(function(payment) {",
                  "            pm.expect(payment.currency).to.eql('EUR');",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/payments?currency=EUR&page=0&size=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "payments"],
              "query": [
                {
                  "key": "currency",
                  "value": "EUR",
                  "description": "Filter by EUR currency"
                },
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            },
            "description": "Filter payments by EUR currency. Sample data includes: 2500.50 EUR, 2000.00 EUR"
          }
        },
        {
          "name": "Get Payments Sorted by Amount (Descending)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Payments are sorted by amount descending\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.payments && jsonData.payments.length > 1) {",
                  "        for (var i = 0; i < jsonData.payments.length - 1; i++) {",
                  "            pm.expect(jsonData.payments[i].amount).to.be.at.least(jsonData.payments[i+1].amount);",
                  "        }",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/payments?page=0&size=20&sort=amount,desc",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "payments"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                },
                {
                  "key": "sort",
                  "value": "amount,desc",
                  "description": "Sort by amount descending"
                }
              ]
            },
            "description": "Get payments sorted by amount in descending order"
          }
        },
        {
          "name": "Get Payment by ID",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure paymentId is set - if not, use a sample one",
                  "if (!pm.collectionVariables.get('paymentId')) {",
                  "    console.log('Warning: paymentId variable not set. Run \"Get All Payments\" first.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 404\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test(\"Response has payment ID\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('id');",
                  "    });",
                  "",
                  "    pm.test(\"Response has required fields\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('amount');",
                  "        pm.expect(jsonData).to.have.property('currency');",
                  "        pm.expect(jsonData).to.have.property('status');",
                  "        pm.expect(jsonData).to.have.property('createdAt');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/payments/{{paymentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "payments", "{{paymentId}}"]
            },
            "description": "Get payment by ID. Uses {{paymentId}} variable set by \"Get All Payments\" request."
          }
        },
        {
          "name": "Create Payment (Standalone - No Creditor/Debtor)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has payment ID\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.collectionVariables.set('paymentId', jsonData.id);",
                  "    console.log('Set paymentId variable:', jsonData.id);",
                  "});",
                  "",
                  "pm.test(\"Response matches request\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var requestData = JSON.parse(pm.request.body.raw);",
                  "    pm.expect(jsonData.amount).to.eql(requestData.amount);",
                  "    pm.expect(jsonData.currency).to.eql(requestData.currency);",
                  "    pm.expect(jsonData.status).to.eql(requestData.status);",
                  "});",
                  "",
                  "pm.test(\"Response has createdAt timestamp\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('createdAt');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 1000.00,\n  \"currency\": \"USD\",\n  \"status\": \"RECEIVED\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "description": "Create standalone payment without creditor/debtor. This works immediately without any setup. Auto-extracts payment ID to {{paymentId}} variable."
          },
          "url": {
            "raw": "{{baseUrl}}/api/v1/payments",
            "host": ["{{baseUrl}}"],
            "path": ["api", "v1", "payments"]
          }
        },
        {
          "name": "Create Payment (With Creditor/Debtor)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure creditorId and debtorId are set",
                  "if (!pm.collectionVariables.get('creditorId') || !pm.collectionVariables.get('debtorId')) {",
                  "    console.log('Warning: creditorId or debtorId not set. Run \"Get All Creditors\" and \"Get All Debtors\" first.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has payment ID\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.collectionVariables.set('paymentId', jsonData.id);",
                  "});",
                  "",
                  "pm.test(\"Response includes creditor and debtor IDs\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var requestData = JSON.parse(pm.request.body.raw);",
                  "    if (requestData.creditorId) {",
                  "        pm.expect(jsonData.creditorId).to.eql(requestData.creditorId);",
                  "    }",
                  "    if (requestData.debtorId) {",
                  "        pm.expect(jsonData.debtorId).to.eql(requestData.debtorId);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 1500.00,\n  \"currency\": \"USD\",\n  \"status\": \"RECEIVED\",\n  \"creditorId\": \"{{creditorId}}\",\n  \"debtorId\": \"{{debtorId}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "description": "⚠️ IMPORTANT: Requires {{creditorId}} and {{debtorId}} variables.\n\n1. Run \"Get All Creditors\" to set {{creditorId}}\n2. Run \"Get All Debtors\" to set {{debtorId}}\n3. Then run this request\n\nOr use \"Create Payment (Standalone)\" which doesn't require IDs."
          },
          "url": {
            "raw": "{{baseUrl}}/api/v1/payments",
            "host": ["{{baseUrl}}"],
            "path": ["api", "v1", "payments"]
          }
        },
        {
          "name": "Echo Payment",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has payment ID\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "});",
                  "",
                  "pm.test(\"Response matches request\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var requestData = JSON.parse(pm.request.body.raw);",
                  "    pm.expect(jsonData.amount).to.eql(requestData.amount);",
                  "    pm.expect(jsonData.currency).to.eql(requestData.currency);",
                  "    pm.expect(jsonData.status).to.eql(requestData.status);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 2000.00,\n  \"currency\": \"EUR\",\n  \"status\": \"PROCESSING\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "description": "Echo payment - returns and saves the payment. Sample data: amount=2000.00, currency=EUR, status=PROCESSING"
          },
          "url": {
            "raw": "{{baseUrl}}/api/v1/payments/echo",
            "host": ["{{baseUrl}}"],
            "path": ["api", "v1", "payments", "echo"]
          }
        }
      ]
    },
    {
      "name": "Creditors",
      "item": [
        {
          "name": "Get All Creditors",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has creditors array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('creditors');",
                  "    pm.expect(jsonData.creditors).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Response has total count\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('total');",
                  "});",
                  "",
                  "// Auto-extract first creditor ID if available",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.creditors && jsonData.creditors.length > 0) {",
                  "        pm.collectionVariables.set('creditorId', jsonData.creditors[0].id);",
                  "        console.log('Set creditorId variable:', jsonData.creditors[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/creditors?page=0&size=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "creditors"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            },
            "description": "Get all creditors with pagination. Auto-extracts first creditor ID to {{creditorId}} variable."
          }
        },
        {
          "name": "Get Creditors Filtered by Name (Sample: Acme)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"All creditors match name filter\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.creditors && jsonData.creditors.length > 0) {",
                  "        jsonData.creditors.forEach(function(creditor) {",
                  "            pm.expect(creditor.name.toLowerCase()).to.include('acme');",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/creditors?name=Acme&page=0&size=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "creditors"],
              "query": [
                {
                  "key": "name",
                  "value": "Acme",
                  "description": "Filter by name (partial match). Sample: 'Acme' finds 'Acme Corporation'"
                },
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            },
            "description": "Filter creditors by name. Sample data includes 'Acme Corporation', 'Tech Solutions Inc', 'Global Services Ltd'"
          }
        },
        {
          "name": "Get Creditors Filtered by Bank Code",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"All creditors have BANK001 bank code\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.creditors && jsonData.creditors.length > 0) {",
                  "        jsonData.creditors.forEach(function(creditor) {",
                  "            pm.expect(creditor.bankCode).to.eql('BANK001');",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/creditors?bankCode=BANK001&page=0&size=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "creditors"],
              "query": [
                {
                  "key": "bankCode",
                  "value": "BANK001",
                  "description": "Filter by bank code"
                },
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            },
            "description": "Filter creditors by bank code BANK001"
          }
        },
        {
          "name": "Get Creditor by ID",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure creditorId is set",
                  "if (!pm.collectionVariables.get('creditorId')) {",
                  "    console.log('Warning: creditorId variable not set. Run \"Get All Creditors\" first.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 404\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test(\"Response has creditor ID\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('id');",
                  "    });",
                  "",
                  "    pm.test(\"Response has required fields\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('name');",
                  "        pm.expect(jsonData).to.have.property('accountNumber');",
                  "        pm.expect(jsonData).to.have.property('bankCode');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/creditors/{{creditorId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "creditors", "{{creditorId}}"]
            },
            "description": "Get creditor by ID. Uses {{creditorId}} variable set by \"Get All Creditors\" request."
          }
        },
        {
          "name": "Create Creditor (Sample: Acme Corporation)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has creditor ID\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.collectionVariables.set('creditorId', jsonData.id);",
                  "});",
                  "",
                  "pm.test(\"Response matches request\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var requestData = JSON.parse(pm.request.body.raw);",
                  "    pm.expect(jsonData.name).to.eql(requestData.name);",
                  "    pm.expect(jsonData.accountNumber).to.eql(requestData.accountNumber);",
                  "    pm.expect(jsonData.bankCode).to.eql(requestData.bankCode);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Acme Corporation\",\n  \"accountNumber\": \"ACC001234567\",\n  \"bankCode\": \"BANK001\",\n  \"email\": \"finance@acme.com\",\n  \"address\": \"123 Business Street, New York, NY 10001\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "description": "Create creditor using sample data. This matches the sample data in the database. Auto-extracts creditor ID to {{creditorId}} variable."
          },
          "url": {
            "raw": "{{baseUrl}}/api/v1/creditors",
            "host": ["{{baseUrl}}"],
            "path": ["api", "v1", "creditors"]
          }
        },
        {
          "name": "Delete Creditor (Soft Delete)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure creditorId is set",
                  "if (!pm.collectionVariables.get('creditorId')) {",
                  "    console.log('Warning: creditorId variable not set. Run \"Get All Creditors\" first.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});",
                  "",
                  "pm.test(\"Response body is empty\", function () {",
                  "    pm.expect(pm.response.text()).to.be.empty;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/creditors/{{creditorId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "creditors", "{{creditorId}}"]
            },
            "description": "Soft delete a creditor by ID. Uses {{creditorId}} variable. After deletion, the creditor will not appear in list requests but can be recovered."
          }
        }
      ]
    },
    {
      "name": "Debtors",
      "item": [
        {
          "name": "Get All Debtors",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has debtors array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('debtors');",
                  "    pm.expect(jsonData.debtors).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Response has total count\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('total');",
                  "});",
                  "",
                  "// Auto-extract first debtor ID if available",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.debtors && jsonData.debtors.length > 0) {",
                  "        pm.collectionVariables.set('debtorId', jsonData.debtors[0].id);",
                  "        console.log('Set debtorId variable:', jsonData.debtors[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/debtors?page=0&size=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "debtors"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            },
            "description": "Get all debtors with pagination. Auto-extracts first debtor ID to {{debtorId}} variable."
          }
        },
        {
          "name": "Get Debtors Filtered by Name (Sample: John)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"All debtors match name filter\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.debtors && jsonData.debtors.length > 0) {",
                  "        jsonData.debtors.forEach(function(debtor) {",
                  "            pm.expect(debtor.name.toLowerCase()).to.include('john');",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/debtors?name=John&page=0&size=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "debtors"],
              "query": [
                {
                  "key": "name",
                  "value": "John",
                  "description": "Filter by name (partial match). Sample: 'John' finds 'John Doe'"
                },
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            },
            "description": "Filter debtors by name. Sample data includes 'John Doe', 'Jane Smith', 'Robert Johnson'"
          }
        },
        {
          "name": "Get Debtors Filtered by Bank Code",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"All debtors have BANK002 bank code\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.debtors && jsonData.debtors.length > 0) {",
                  "        jsonData.debtors.forEach(function(debtor) {",
                  "            pm.expect(debtor.bankCode).to.eql('BANK002');",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/debtors?bankCode=BANK002&page=0&size=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "debtors"],
              "query": [
                {
                  "key": "bankCode",
                  "value": "BANK002",
                  "description": "Filter by bank code"
                },
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            },
            "description": "Filter debtors by bank code BANK002"
          }
        },
        {
          "name": "Get Debtor by ID",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure debtorId is set",
                  "if (!pm.collectionVariables.get('debtorId')) {",
                  "    console.log('Warning: debtorId variable not set. Run \"Get All Debtors\" first.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 404\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test(\"Response has debtor ID\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('id');",
                  "    });",
                  "",
                  "    pm.test(\"Response has required fields\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('name');",
                  "        pm.expect(jsonData).to.have.property('accountNumber');",
                  "        pm.expect(jsonData).to.have.property('bankCode');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/debtors/{{debtorId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "debtors", "{{debtorId}}"]
            },
            "description": "Get debtor by ID. Uses {{debtorId}} variable set by \"Get All Debtors\" request."
          }
        },
        {
          "name": "Create Debtor (Sample: John Doe)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has debtor ID\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.collectionVariables.set('debtorId', jsonData.id);",
                  "});",
                  "",
                  "pm.test(\"Response matches request\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    var requestData = JSON.parse(pm.request.body.raw);",
                  "    pm.expect(jsonData.name).to.eql(requestData.name);",
                  "    pm.expect(jsonData.accountNumber).to.eql(requestData.accountNumber);",
                  "    pm.expect(jsonData.bankCode).to.eql(requestData.bankCode);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Doe\",\n  \"accountNumber\": \"DEB001111111\",\n  \"bankCode\": \"BANK001\",\n  \"email\": \"john.doe@email.com\",\n  \"address\": \"100 Main Street, Boston, MA 02101\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "description": "Create debtor using sample data. This matches the sample data in the database. Auto-extracts debtor ID to {{debtorId}} variable."
          },
          "url": {
            "raw": "{{baseUrl}}/api/v1/debtors",
            "host": ["{{baseUrl}}"],
            "path": ["api", "v1", "debtors"]
          }
        },
        {
          "name": "Delete Debtor (Soft Delete)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure debtorId is set",
                  "if (!pm.collectionVariables.get('debtorId')) {",
                  "    console.log('Warning: debtorId variable not set. Run \"Get All Debtors\" first.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 204\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});",
                  "",
                  "pm.test(\"Response body is empty\", function () {",
                  "    pm.expect(pm.response.text()).to.be.empty;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/debtors/{{debtorId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "debtors", "{{debtorId}}"]
            },
            "description": "Soft delete a debtor by ID. Uses {{debtorId}} variable. After deletion, the debtor will not appear in list requests but can be recovered."
          }
        }
      ]
    },
    {
      "name": "Internationalization (i18n)",
      "item": [
        {
          "name": "Get Payment (English)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure paymentId is set",
                  "if (!pm.collectionVariables.get('paymentId')) {",
                  "    console.log('Warning: paymentId variable not set. Run \"Get All Payments\" first.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 404\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                  "});",
                  "",
                  "pm.test(\"Response has Accept-Language header effect\", function () {",
                  "    // English error messages if 404",
                  "    if (pm.response.code === 404) {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData.message).to.be.a('string');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept-Language",
                "value": "en",
                "description": "English language"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/payments/{{paymentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "payments", "{{paymentId}}"]
            },
            "description": "Get payment with English language header. Uses {{paymentId}} variable."
          }
        },
        {
          "name": "Get Payment (Spanish)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure paymentId is set",
                  "if (!pm.collectionVariables.get('paymentId')) {",
                  "    console.log('Warning: paymentId variable not set. Run \"Get All Payments\" first.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 404\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                  "});",
                  "",
                  "pm.test(\"Response has Spanish language header effect\", function () {",
                  "    // Spanish error messages if 404",
                  "    if (pm.response.code === 404) {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData.message).to.be.a('string');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept-Language",
                "value": "es",
                "description": "Spanish language"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/payments/{{paymentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "payments", "{{paymentId}}"]
            },
            "description": "Get payment with Spanish language header. Uses {{paymentId}} variable."
          }
        }
      ]
    },
    {
      "name": "Validation Tests",
      "item": [
        {
          "name": "Invalid Payment (Negative Amount)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": -10,\n  \"currency\": \"USD\",\n  \"status\": \"RECEIVED\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "description": "Test validation: negative amount should return 400 Bad Request"
          },
          "url": {
            "raw": "{{baseUrl}}/api/v1/payments",
            "host": ["{{baseUrl}}"],
            "path": ["api", "v1", "payments"]
          }
        },
        {
          "name": "Invalid Payment (Invalid Currency)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 100.50,\n  \"currency\": \"INVALID\",\n  \"status\": \"RECEIVED\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "description": "Test validation: invalid currency code should return 400 Bad Request"
          },
          "url": {
            "raw": "{{baseUrl}}/api/v1/payments",
            "host": ["{{baseUrl}}"],
            "path": ["api", "v1", "payments"]
          }
        },
        {
          "name": "Invalid Payment (Invalid Status)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 100.50,\n  \"currency\": \"USD\",\n  \"status\": \"INVALID_STATUS\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "description": "Test validation: invalid status should return 400 Bad Request"
          },
          "url": {
            "raw": "{{baseUrl}}/api/v1/payments",
            "host": ["{{baseUrl}}"],
            "path": ["api", "v1", "payments"]
          }
        },
        {
          "name": "Invalid Creditor (Empty Fields)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"\",\n  \"accountNumber\": \"\",\n  \"bankCode\": \"\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "description": "Test validation: empty required fields should return 400 Bad Request"
          },
          "url": {
            "raw": "{{baseUrl}}/api/v1/creditors",
            "host": ["{{baseUrl}}"],
            "path": ["api", "v1", "creditors"]
          }
        }
      ]
    },
    {
      "name": "Error Tests",
      "item": [
        {
          "name": "Payment Not Found (404)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "    pm.expect(jsonData.message).to.include('not found');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/payments/00000000-0000-0000-0000-000000000000",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "v1",
                "payments",
                "00000000-0000-0000-0000-000000000000"
              ]
            },
            "description": "Test 404 error: non-existent payment ID should return 404 Not Found"
          }
        },
        {
          "name": "Creditor Not Found (404)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "    pm.expect(jsonData.message).to.include('not found');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/creditors/00000000-0000-0000-0000-000000000000",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "v1",
                "creditors",
                "00000000-0000-0000-0000-000000000000"
              ]
            },
            "description": "Test 404 error: non-existent creditor ID should return 404 Not Found"
          }
        },
        {
          "name": "Debtor Not Found (404)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"Response has error message\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "    pm.expect(jsonData.message).to.include('not found');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/debtors/00000000-0000-0000-0000-000000000000",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "v1",
                "debtors",
                "00000000-0000-0000-0000-000000000000"
              ]
            },
            "description": "Test 404 error: non-existent debtor ID should return 404 Not Found"
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "creditorId",
      "value": "",
      "type": "string"
    },
    {
      "key": "debtorId",
      "value": "",
      "type": "string"
    },
    {
      "key": "paymentId",
      "value": "",
      "type": "string"
    }
  ]
}
